<!DOCTYPE html>


<html>
<head>

	<meta charset="utf-8">
	<title>Hello OpenCV.js</title>
	<script src="https://docs.opencv.org/3.4.0/opencv.js"></script>
</head>

<body>

	<h2>Hello OpenCV.js</h2>
	<div>
		<div class = "inputoutput">
			<img id = "ImageSrc" alt="No Image"/>
			<div class="caption">imageSrc<input type="file" id="fileInput" name="file"></div>
		</div>
		
		 <div class="inputoutput">
			<canvas id="canvasOutput" ></canvas>
			<div class="caption">canvasOutput</div>
		</div>
		
	</div>

	<script type="text/javascript">
		let imgElement = document.getElementById("ImageSrc");
		let inputElement = document.getElementById("fileInput");
		
		inputElement.addEventListener("change", (e)=>{
			imgElement.src = URL.createObjectURL(e.target.files[0]);
		}, false);
		
		
		let src, dist;
		let width = 1200, height = 1200;
		imgElement.onload = function() {
			let mat = cv.imread(imgElement);
			dst = new cv.Mat(height, width, cv.CV_8UC1);
			
			cv.cvtColor(mat, dst, cv.COLOR_RGBA2GRAY);
			cv.imshow('canvasOutput', dst);
			mat.delete();
		};
		
	
	</script>

</body>

</html>